
<h1>Regex</h1>

<p>(“Like a Knife”)</p>

<h2>DESCRIPTION</h2>

<p>Yea, I know what you are going to say. “I can do that with <em>__</em>”
Fill in the blank with <tt>grep</tt>, <tt>awk</tt>, <tt>sed</tt>,
<tt>perl</tt>, etc. But honestly, none of these tools are “Langauge 2.0”
(read “post-Ruby”). What I want is a simple command-line tool that gives me
quick access to a Regular Expression engine. No more, no less.</p>

<p>Now I could have written this in Perl. I’m sure it would just as good, if
not better since Perl’s Regualar Expression engine rocks, or so I hear. But
Ruby’s is pretty damn good too, and getting better (with 1.9+). And since I
know Ruby very well. Well that’s what you get.</p>

<h2>RESOURCES</h2>
<ul><li>
<p><a href="http://rubyworks.github.com/regex">Home</a></p>
</li><li>
<p><a href="http://github.com/rubyworks/regex">Code</a></p>
</li><li>
<p><a href="http://groups.google.com/groups/rubyworks-mailinglist">Mail</a></p>
</li></ul>

<h2>USAGE</h2>

<p>For detailed explication and examples of usage refer to the (User Docs){<a
href="http://wiki.github.com/rubyworks/regex">wiki.github.com/rubyworks/regex</a>},
the (QED Docs){<a
href="http://github.com/rubyworks/regex/docs/qed">github.com/rubyworks/regex/docs/qed</a>}
and the (API Docs){<a
href="http://github.com/rubyworks/regex/docs/api">github.com/rubyworks/regex/docs/api</a>}.</p>

<p>In brief, usage simply entails supplying a regular expression and a list of
files to be searched to the <tt>regex</tt> command.</p>

<pre>$ regex '/=begin.*?\n(.*)\n=end/' sample.rb</pre>

<p>This example does exactly what you would expect –returns the content
between the first <tt>=begin ... =end</tt> clause it comes across. To see
all such block comments, as you would expect, you can use add <tt>g</tt>
regular expression mode flag.</p>

<pre>$ regex '/=begin.*?\n(.*)\n=end/g' sample.rb</pre>

<p>Alternatively you can use the <tt>--repeat/--global/-g</tt> option.</p>

<pre>$ regex -g '/=begin.*?\n(.*)\n=end/' sample.rb</pre>

<p>Notice that in all these examples we have used single quotes to wrap the
regular expression. This is to prevent the shell from expanding <tt>*</tt>
and &lt;code&gt;?&lt;code&gt; marks.</p>

<p>By default <tt>regex</tt> produces string output. Regular expression groups
are delimited by ASCII 29 (035 1D) END OF GROUP, and repeat matches are
delimited by ASCII character 30 (036 1E) END OF RECORD.</p>

<p>Instead of string output, <tt>regex</tt> also supports YAML and JSON
formats using the <tt>--yaml/-y</tt> and <tt>--json/-j</tt> options.</p>

<pre>$ regex -y -g '/=begin.*?\n(.*)\n=end/' sample.rb</pre>

<p>In this case the returned matches are delimited using as an array of
arrays.</p>

<p>To get more information that just the match results use the
<tt>--detail/-d</tt> option.</p>

<p>Also, we can do without the the <tt>/ /&lt;code&gt; deliminators on the
regular expression if we use the &lt;code&gt;--search/-s</tt> option
instead. Going back to our first example:</p>

<pre>$ regex -s '=begin.*?\n(.*)\n=end' sample.rb</pre>

<p>To replace text, use the <tt>--replace/--r</tt> option.</p>

<pre>$ regex --yaml --repeat -s 'Tom' -r 'Bob' sample.rb</pre>

<p>This will replace every occurance of “Tom” with “Bob” in the
<tt>sample.rb</tt> file. By default <tt>regex</tt> will backup any file it
changes by adding a <tt>.bak</tt> extension to the original copy.</p>

<p>Check out the <tt>--help</tt> and I am sure the rest will be smooth
sailing. But it you want more information, then do us the good favor of
jumping over to the <a
href="http://wiki.github.com/rubyworks/regex">wiki</a>.</p>

<h2>OUTPUT</h2>

<p>Regex has three output modes. YAML, JSON and standard text. The standard
text output is unique in that it utilizes special ASCII characters to
separate matches and regex groups. ASCII 29, called the *record separator*,
is used to separate repeat matches. ASCII 30, called the *group separator*,
is is used to separate regular expression groups.</p>

<h2>STATUS</h2>

<p>The project is maturing but still a touch wet behnd the years. So don’t be
too surprised if it doesn’t have every feature under the sun just yet, or
that every detail is going to work absolutely peachy. But hey, if something
needs fixing or a feature needs adding, well then get in there and send me
a patch. Open source software is built on *TEAM WORK*, right?</p>

<h2>COPYRIGHT</h2>

<p>Copyright © 2010 Thomas Sawyer</p>

<p>Regex is licensed under the terms of the Apache License, Version 2.0.</p>

<p>See COPYING.rdoc file for details.</p>
